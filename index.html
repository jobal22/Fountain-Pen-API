<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fountain Pen API</title>
    <link rel="stylesheet" href="main.css" type="text/css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz"
     crossorigin="anonymous">
     <link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet">
     
     <!--This is Etsy's prefered way to get across CORS issues in js-->
     <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js "></script>
     <script type="text/javascript">
     (function($){
     
         $(document).ready(function(){
             $('#js-form').bind('submit', function() {
                 api_key = "zlz871aunsfnzwupy482id1z";
                 terms = $('#js-search-term').val()+"%fountain"+"%pen";
                 etsyURL = "https://openapi.etsy.com/v2/listings/active.js?callback=getData&keywords="+
                     terms+"&limit=7&includes=Images:1&api_key="+api_key;
     
                 $('#etsy-images').empty();
                 $('<p></p>').text('Searching for '+terms).appendTo('#etsy-images');
     
                 $.ajax({
                     url: etsyURL,
                     dataType: 'jsonp',
                     success: function(data) {
                         if (data.ok) {
                            //  console.log(data.results);
                            //  var resultsArray = data.results;
                            //  resultsArray.forEach(function(result){
                            //      console.log(result.title);
                            //  })

                             $('#etsy-images').empty();
                             if (data.count > 0) {
                                 $.each(data.results, function(i,item) {
                                    $("<h4></h4>").text(item.title).appendTo("#etsy-images");

                                    $("<img/>").attr("src", item.Images[0].url_170x135).appendTo("#etsy-images").wrap(
                                         "<a href='" + item.url + "'></a>"
                                     );


                                    $("<p></p>").text('$' + item.price).appendTo("#etsy-images");

                                     
                                     if (i%1 == 0) { 
                                         $('<br/>').appendTo('#etsy-images');
                                     }
                                 });
                             } else {
                                 $('<p>No results.</p>').appendTo('#etsy-images');
                             }
                         } else {
                             $('#etsy-images').empty();
                             alert(data.error);
                         }
                     }
                 });
     
                 return false;
             })
         });
     
     })(jQuery);
    </script>

</head>

<body>
    <div class="container">
        <nav role="navigation" class="navbar">
            <div class="nav-container">
                <div class="title">
                    <h1>Fountain Pen Information</h1>
                </div>
                <div class="topnav">
                    <div class="hamburger">
                        <a href="javascript:void(0);" class="icon" onclick="myFunction()">&#61</a>
                    </div>
                    <div class="menu" id="myLinks">
                        <ul>
                            <li><a class="jumper" href="#js-mainSearch">Search</a></li>
                            <!--<li><a class="jumper" href="#js-googleResults">Google Results</a></li>-->
                            <li><a class="jumper" href="#js-etsyResults">Etsy Results</a></li>
                            <li><a class="jumper" href="#js-youtubeResults">Youtube Results</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
        
        <main role="main" class="siteContent">
            <header class="infoContent">
                <p class="header-p">Whether you are an enthusiast or new to fountain pens, this API provides a list of popular 
                    fountain pen brands, as well as, popular pen shops. Each brand and shop link will take you 
                    to the brand’s website. The search bar is design for you to enter a brand and/or specific 
                    brand and model. The results of this search will display Etsy images that will allow you 
                    to see your pen’s availability on Etsy. The results also displays links to the YouTube 
                    reviews for your pen. </p>
                <div class="penOptions">
                    <ul class="brand1">
                        <li><a class="penBrand" href="https://www.pelikan.com/pulse/Pulsar/en_US_INTL.Core.displayFilter.252412./fountain-pens">Pelikan</a></li>
                        <li><a class="penBrand" href="https://www.sailorpen.com/">Sailor</a></li>
                        <li><a class="penBrand" href="https://conklinpens.com/">Conklin</a></li>
                    </ul>
                    <ul class="brand2">
                        <li><a class="penBrand1" href="https://www.montblanc.com/en-us/landingpages/fountain-pens.html">Montblanc</a></li>
                        <li><a class="penBrand1" href="http://pilotpen.us/categories/fountain-pens/">Pilot</a></li>
                        <li><a class="penBrand1" href="https://www.lamy.com/en/fountain-pens/">Lamy</a></li>
                        <li><a class="penBrand1" href="https://www.platinum-pen.co.jp/english.html">Platinum</a></li>
                    </ul>
                    <ul class="shop">
                        <li><a class="penShop" href="https://www.penchalet.com/fine_pens/fountain_pens/">Pen Chalet</a></li>
                        <li><a class="penShop" href="https://andersonpens.com/">Anderson Pens</a></li>
                        <li><a class="penShop" href="https://www.gouletpens.com/">The Goulet Pen Co</a></li>
                    </ul>
                </div>
                <form id="js-form">
                    <input type="text" name="search-term" id="js-search-term" placeholder="Pelikan" required>
                    <button type="submit">Search</button>
                </form>
            </header>

            <p id="js-error-message" class="error-message"></p>

            <!--<section class="googleResults display hidden" id="js-googleResults">
                <h3>Google Results</h3>
                
            </section>-->
            <div class="box">
                <section class="etsyResults display" id="js-etsyResults">
                    <h3>Etsy Results</h3>
                    <div id="etsy-images"></div>
                </section>
                <section class="youtubeResults display" id="js-youtubeResults">
                    <h3>Youtube Results</h3>
                    <ul id="youtubeResults-list" class="list">
                    </ul>
                </section>
            </div>

            
        </main>
        
    </div>
    <footer>

    </footer>
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
    <script src="index.js"></script>
</body>
</html>